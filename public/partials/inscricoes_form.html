<div id="page-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <h3>Cadastro de Inscrição</h3>
                <ol class="breadcrumb">
                        <li><a href="#/"><i class="fa fa-home"></i> Início</a></li>
                        <li><a href="#/catequese"><i class="fa fa-users"></i> Catequese</a></li>
                        <li><a href="#/catequese/inscricoes"><i class="fa fa-user"></i> Inscrições</a></li>
                        <li class="active"> Editar</li>
                </ol>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <form novalidate name="formulario" role="form" ng-submit="submeterForm()">
                    <div class="row" >
                        <div class="col-md-12">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    Dados Pessoais
                                </div>
                                <div class="panel-body" ng-controller="PessoasListController">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group" ng-class="{ 'has-error' : formulario.pessoa.$invalid && !formulario.pessoa.$pristine && formulario.$submitted }">
                                                <div class="input-group">
                                                    
                                                    <select name="pessoa" class="form-control" required
                                                            ng-model="inscricao.pessoa" ng-options="pessoa as pessoa.nome for pessoa in pessoas track by pessoa.id">
                                                        <option value="">Selecione</option>
                                                    </select>
                                                    <span class="input-group-btn">
                                                        <a href="#/pessoas/new" class="btn btn-primary" type="button">
                                                            Novo
                                                        </a>
                                                    </span>
                                                </div>
                                                <span class="label list-group-item-danger" ng-show="formulario.$submitted && formulario.pessoa.$error.required">
                                                    Este campo é obrigatório
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                <label>CPF</label>
                                                <input type="cpf" class="form-control" name="cpf" ng-model="inscricao.pessoa.cpf" disabled>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                <label>Email</label>
                                                <input type="email" class="form-control" name="email" ng-model="inscricao.pessoa.email" disabled>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                <label>Telefone</label>
                                                <input type="text" class="form-control" name="telefone1" ng-model="inscricao.pessoa.telefone1" disabled>
                                            </div>
                                        </div>                      
                                    </div>
                                </div>
                            </div> <!-- FIM PANNEL PESSOA -->
                        </div>
                        <div class="col-md-6">
                            <div class="form-group" ng-controller="EtapasCatequeseListController">
                                <label>Etapa</label>
                                <select name="etapaCatequese" class="form-control" 
                                        ng-model="inscricao.etapaCatequeseId" ng-options="etapaCatequese.id as etapaCatequese.descricao for etapaCatequese in etapasCatequese">
                                    <option value="">Selecione</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group" ng-controller="ComunidadesListController">
                                <label>Comunidade</label>
                                <select name="comunidade" class="form-control"
                                        ng-model="inscricao.comunidadeId" ng-options="comunidade.id as comunidade.nome for comunidade in comunidades">
                                    <option value="">Selecione</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row" >
                        <div class="col-lg-6">
                            <div class="form-group" ng-controller="EscolasListController">
                                <label>Escola</label>
                                <select name="escola" class="form-control"
                                        ng-model="inscricao.escolaId" ng-options="escola.id as escola.nome for escola in escolas">
                                    <option value="">Selecione</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-group" ng-controller="EtapasEscolaListController">
                                <label>Etapa Escolar</label>
                                <select name="etapaEscola" class="form-control" ng-model="inscricao.etapaEscolaId" ng-options="etapaEscola.id as etapaEscola.descricao for etapaEscola in etapasEscola">
                                    <option value="">Selecione</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-2">
                            <div class="form-group" ng-controller="AnosLetivosCatequeseListController" ng-class="{ 'has-error' : formulario.anoLetivo.$invalid && !formulario.anoLetivo.$pristine && formulario.$submitted }">
                                <label>Ano</label>
                                <select name="anoLetivo" class="form-control" required
                                        ng-model="inscricao.anoLetivoId" ng-options="anoLetivo.id as anoLetivo.descricao for anoLetivo in anosLetivos">
                                    <option value="">Selecione</option>
                                </select>
                                <span class="label list-group-item-danger" ng-show="formulario.$submitted && formulario.anoLetivo.$error.required">
                                    Este campo é obrigatório
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-lg-2">
                            <div class="form-group" ng-class="{ 'has-error' : formulario.dataInscricao.$invalid && !formulario.dataInscricao.$pristine && formulario.$submitted }">
                                <label>Data da Inscrição</label>
                                <input type="text" name="dataInscricao" ui-mask="99/99/9999" model-view-value="true" 
                                        class="form-control" ng-model="inscricao.dataInscricao" pattern="^([012][0-9]|[3][01])\/(0[1-9]|1[0-2])\/[12][0-9]{3}$">
                                <span class="label list-group-item-danger" ng-show="formulario.$submitted && formulario.dataInscricao.$error.pattern">
                                    A data informada é inválida
                                </span>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-group" ng-controller="SituacoesInscricaoListController">
                                <label>Situação da Inscrição</label>
                                <select name="situacaoInscricao" class="form-control" ng-model="inscricao.situacaoInscricaoId"
                                        ng-options="situacaoInscricao.id as situacaoInscricao.descricao for situacaoInscricao in situacoesInscricao">
                                    <option value="">Selecione</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-2">
                            <div class="form-group" ng-class="{ 'has-error' : formulario.status.$invalid && !formulario.status.$pristine && formulario.$submitted }">
                                <label>Status</label>
                                <select name="status" class="form-control" ng-model="inscricao.status" required>
                                    <option value="">Selecione</option>
                                    <option value="1">Ativo</option>
                                    <option value="0">Desativado</option>
                                </select>
                                <span class="label list-group-item-danger" ng-show="formulario.$submitted && formulario.status.$error.required">
                                    Este campo é obrigatório
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-if="inscricao.etapaCatequeseId == 4">
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label>Nome do Padrinho/Madrinha</label>
                                <input name="nome" class="form-control" ng-model="inscricao.nomePadrinho">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <label>Pagamentos</label>
                                </div>
                                <div class="panel-body">
                                    <div class="col-lg-2">
                                        <div class="form-group">
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" ng-model="inscricao.livroPago">
                                                    Livro
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2">
                                        <div class="form-group">
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" ng-model="inscricao.inscricaoPaga">
                                                    Taxa de Inscrição
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2">
                                        <div class="form-group" ng-class="{ 'has-error' : formulario.inscricaoDataPagamento.$invalid && !formulario.inscricaoDataPagamento.$pristine && formulario.$submitted }">
                                            <label>Data de Pagamento</label>
                                            <input type="text" name="inscricaoDataPagamento" ui-mask="99/99/9999" model-view-value="true" 
                                                    class="form-control" ng-model="inscricao.inscricaoDataPagamento" pattern="^([012][0-9]|[3][01])\/(0[1-9]|1[0-2])\/[12][0-9]{3}$">
                                            <span class="label list-group-item-danger" ng-show="formulario.$submitted && formulario.inscricaoDataPagamento.$error.pattern">
                                                A data informada é inválida
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label>Observações</label>
                                <textarea type="text" class="form-control" rows="5" name="observacoes" ng-model="inscricao.observacoes"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h5>Responsáveis</h5>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <!--div class="table-responsive" ng-controller="ResponsaveisInscricaoListController"-->
                                            <div class="table-responsive">
                                                <table class="table table-hover table-striped tablesorter">
                                                    <thead>
                                                        <tr>
                                                            <th>Nome</th>
                                                            <th>Parentesco</th>
                                                            <th>Contato</th>
                                                            <th>Ações</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="responsavel in inscricao.responsaveis">
                                                            <td>{{responsavel.pessoa.nome}}</td>
                                                            <td>{{responsavel.parentesco.descricao }}</td>
                                                            <td>{{responsavel.pessoa.telefone1 }}</td>
                                                            <td>
                                                                <button type="button" class="btn btn-sm btn-default" ng-click="removerResponsavel(responsavel)">Remover</button>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel-footer">
                                    
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <button ng-click="incluirResponsavel()" 
                                                    type="button"
                                                    class="btn btn-sm btn-primary pull-right">
                                                Incluir
                                            </button>
                                        </div>
                                    </div>
                                    
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div ng-show="mensagem.length" class="alert alert-warning alert-custom">
                                <button type="button" class="close" data-ng-click="switchBool('mensagem')" >
                                    <span aria-hidden="true">&times;</span>
                                </button>
                                {{mensagem}}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <button type="submit" class="btn btn-primary">
                                Salvar
                            </button>
                            <a href="#/catequese/inscricoes" class="btn btn-primary">Voltar</a>
                        </div>
                    </div>  
                </form>
            </div>
        </div><!-- /.row -->
    </div>
    